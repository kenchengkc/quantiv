(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{3718:function(e,t,s){Promise.resolve().then(s.bind(s,6733))},6733:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(7437),l=s(9376),r=s(1713),n=s(3085),i=s(525),c=s(4401);function d(e){let{data:t}=e,{spotPrice:s,summary:l}=t,r=(e,t)=>t?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:e}),(0,a.jsxs)("span",{className:"text-sm font-bold",children:["\xb1",t.percentage.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1 text-red-600",children:[(0,a.jsx)(n.Z,{className:"h-3 w-3"}),"$",t.lower.toFixed(2)]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:["$",t.upper.toFixed(2),(0,a.jsx)(i.Z,{className:"h-3 w-3"})]})]}),(0,a.jsxs)("div",{className:"mt-2 h-2 bg-gray-200 rounded-full relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute h-full bg-gradient-to-r from-red-500 via-yellow-500 to-green-500",style:{left:"".concat(Math.max(0,(t.lower-.8*s)/(.4*s)*100),"%"),right:"".concat(Math.max(0,(1.2*s-t.upper)/(.4*s)*100),"%")}}),(0,a.jsx)("div",{className:"absolute w-0.5 h-full bg-gray-900",style:{left:"50%"}})]})]})]}):null;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-blue-500"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Expected Move"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[r("Daily (1D)",l.daily),r("Weekly (7D)",l.weekly),r("Monthly (30D)",l.monthly)]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Calculated using straddle pricing and implied volatility. Represents 1 standard deviation move (~68% probability)."})})]})}var o=s(6215);function x(e){let{data:t}=e,{current:s,rank:l,percentile:r,high52Week:n,low52Week:c}=t,d=Array.from({length:52},(e,t)=>c+(n-c)*(.5+.3*Math.sin(t/8)+(Math.random()-.5)*.2));d.push(s);let x=Math.min(...d),m=Math.max(...d)-x;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-purple-500"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"IV Stats"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"IV Rank"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:l.toFixed(0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"IV Percentile"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:r.toFixed(0)})]})]}),(0,a.jsx)("div",{className:"h-20 flex items-end gap-0.5",children:d.map((e,t)=>{let l=t===d.length-1;return(0,a.jsx)("div",{className:"flex-1 rounded-t transition-colors ".concat(l?"bg-purple-500":e>s?"bg-gray-300":"bg-purple-200"),style:{height:"".concat((e-x)/m*100,"%")}},t)})}),(0,a.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["52W Low: ",c.toFixed(1),"%"]}),(0,a.jsxs)("span",{children:["Current: ",s.toFixed(1),"%"]}),(0,a.jsxs)("span",{children:["52W High: ",n.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,a.jsx)("div",{className:"text-sm font-medium ".concat(l>50?"text-orange-600":"text-blue-600"),children:l>50?(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(i.Z,{className:"h-3 w-3"}),"Elevated volatility"]}):(0,a.jsx)("span",{children:"Normal volatility range"})})})]})}var m=s(1047);function h(e){var t;let{data:s,symbol:l}=e,r=s.events[0],c=(null==r?void 0:null===(t=r.historicalMoves)||void 0===t?void 0:t.slice(0,8))||[];return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-orange-500"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Earnings"})]}),r&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-orange-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Next Earnings"}),(0,a.jsx)("p",{className:"text-lg font-bold",children:new Date(r.date).toLocaleDateString()}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[r.time," • ",r.fiscalQuarter]})]}),c.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Historical Moves"}),(0,a.jsx)("div",{className:"space-y-1",children:c.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-gray-500",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",year:"2-digit"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[null!==e.epsSurprise&&(0,a.jsx)("span",{className:"font-medium ".concat(e.epsSurprise>0?"text-green-600":"text-red-600"),children:e.epsSurprise>0?"✓":"✗"}),(0,a.jsxs)("span",{className:"font-bold flex items-center gap-0.5 ".concat(e.priceMovePercent>=0?"text-green-600":"text-red-600"),children:[e.priceMovePercent>=0?(0,a.jsx)(i.Z,{className:"h-3 w-3"}):(0,a.jsx)(n.Z,{className:"h-3 w-3"}),Math.abs(e.priceMovePercent).toFixed(1),"%"]})]})]},t))})]}),s.stats&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Avg Move"}),(0,a.jsxs)("p",{className:"font-bold",children:[s.stats.avgAbsMove.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Beat Rate"}),(0,a.jsxs)("p",{className:"font-bold",children:[(100*s.stats.beatRate).toFixed(0),"%"]})]})]})]})}var u=s(2265),p=s(875);function g(e){var t,s;let{data:l}=e,[r,n]=(0,u.useState)(null===(t=l.chain.expirations[0])||void 0===t?void 0:t.date),i=l.chain.quote.last,c=l.chain.strikes[r]||{},d=[...new Set(Object.values(c).map(e=>e.strike))].sort((e,t)=>e-t),o=d.findIndex(e=>e>=i),x=d.slice(Math.max(0,o-5),o+6);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Options Chain"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{value:r,onChange:e=>n(e.target.value),className:"appearance-none bg-gray-50 border border-gray-300 rounded-lg px-3 py-1.5 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:l.chain.expirations.slice(0,5).map(e=>(0,a.jsxs)("option",{value:e.date,children:[new Date(e.date).toLocaleDateString()," (",e.dte,"d)"]},e.date))}),(0,a.jsx)(p.Z,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 pointer-events-none text-gray-500"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsxs)("thead",{children:[(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{colSpan:4,className:"text-center py-2 font-medium text-green-600",children:"Calls"}),(0,a.jsx)("th",{className:"text-center py-2 font-medium",children:"Strike"}),(0,a.jsx)("th",{colSpan:4,className:"text-center py-2 font-medium text-red-600",children:"Puts"})]}),(0,a.jsxs)("tr",{className:"text-xs text-gray-500 border-b",children:[(0,a.jsx)("th",{className:"text-left py-1",children:"OI"}),(0,a.jsx)("th",{className:"text-left py-1",children:"Vol"}),(0,a.jsx)("th",{className:"text-left py-1",children:"IV"}),(0,a.jsx)("th",{className:"text-left py-1",children:"Bid/Ask"}),(0,a.jsx)("th",{className:"text-center py-1"}),(0,a.jsx)("th",{className:"text-right py-1",children:"Bid/Ask"}),(0,a.jsx)("th",{className:"text-right py-1",children:"IV"}),(0,a.jsx)("th",{className:"text-right py-1",children:"Vol"}),(0,a.jsx)("th",{className:"text-right py-1",children:"OI"})]})]}),(0,a.jsx)("tbody",{children:x.map(e=>{let t=c["".concat(e,"_call")],s=c["".concat(e,"_put")],r=e===l.atmStrike;return(0,a.jsxs)("tr",{className:"border-b border-gray-100 ".concat(r?"bg-blue-50":""),children:[(0,a.jsx)("td",{className:"py-1.5 text-xs",children:(null==t?void 0:t.openInterest)||"-"}),(0,a.jsx)("td",{className:"py-1.5 text-xs",children:(null==t?void 0:t.volume)||"-"}),(0,a.jsx)("td",{className:"py-1.5 text-xs",children:(null==t?void 0:t.iv)?"".concat((100*t.iv).toFixed(0),"%"):"-"}),(0,a.jsx)("td",{className:"py-1.5 text-xs",children:(null==t?void 0:t.bid)&&(null==t?void 0:t.ask)?"".concat(t.bid.toFixed(2),"/").concat(t.ask.toFixed(2)):"-"}),(0,a.jsx)("td",{className:"py-1.5 text-center font-medium ".concat(r?"text-blue-600":""),children:e.toFixed(2)}),(0,a.jsx)("td",{className:"py-1.5 text-xs text-right",children:(null==s?void 0:s.bid)&&(null==s?void 0:s.ask)?"".concat(s.bid.toFixed(2),"/").concat(s.ask.toFixed(2)):"-"}),(0,a.jsx)("td",{className:"py-1.5 text-xs text-right",children:(null==s?void 0:s.iv)?"".concat((100*s.iv).toFixed(0),"%"):"-"}),(0,a.jsx)("td",{className:"py-1.5 text-xs text-right",children:(null==s?void 0:s.volume)||"-"}),(0,a.jsx)("td",{className:"py-1.5 text-xs text-right",children:(null==s?void 0:s.openInterest)||"-"})]},e)})})]})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["ATM Strike: ",(null===(s=l.atmStrike)||void 0===s?void 0:s.toFixed(2))||"N/A"]}),(0,a.jsxs)("span",{children:["Spot: $",i.toFixed(2)]})]})]})}var j=s(3247),v=s(2489);let f=["SPY","QQQ","AAPL","MSFT","NVDA","TSLA","AMZN","META","GOOGL","AMD","NFLX","DIS","BA","JPM","V","PYPL","SQ","SHOP","COIN","ARKK"];function N(){let[e,t]=(0,u.useState)(""),[s,r]=(0,u.useState)(!1),[n,i]=(0,u.useState)([]),c=(0,l.useRouter)(),d=(0,u.useRef)(null),o=(0,u.useRef)(null);(0,u.useEffect)(()=>{let e=e=>{o.current&&!o.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,u.useEffect)(()=>{if(e.length>0){let t=f.filter(t=>t.toLowerCase().includes(e.toLowerCase()));i(t),r(t.length>0)}else i([]),r(!1)},[e]);let x=e=>{e&&(c.push("/".concat(e.toUpperCase())),t(""),r(!1))};return(0,a.jsxs)("div",{ref:o,className:"relative w-full max-w-xs",children:[(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),x(e)},className:"relative",children:[(0,a.jsx)("input",{ref:d,type:"text",value:e,onChange:e=>t(e.target.value.toUpperCase()),placeholder:"Search symbol...",className:"w-full pl-10 pr-10 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white"}),(0,a.jsx)(j.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e&&(0,a.jsx)("button",{type:"button",onClick:()=>{var e;t(""),null===(e=d.current)||void 0===e||e.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})]}),s&&n.length>0&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:n.map(e=>(0,a.jsx)("button",{onClick:()=>x(e),className:"w-full px-4 py-2 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",children:(0,a.jsx)("span",{className:"font-medium",children:e})},e))})]})}var b=s(9322),y=s(1817);function w(){var e;let t=null===(e=(0,l.useParams)().symbol)||void 0===e?void 0:e.toUpperCase(),{data:s,isLoading:n,error:i}=function(e){let{symbol:t}=e;return(0,r.a)({queryKey:["options",t],queryFn:async()=>{if(!t)throw Error("Symbol is required");let e=await fetch("/api/options/".concat(t));if(!e.ok)throw Error("Failed to fetch options data: ".concat(e.statusText));return e.json()},enabled:!!t,staleTime:3e4,refetchInterval:6e4})}({symbol:t}),{data:c,isLoading:o,error:m}=function(e){let{symbol:t}=e;return(0,r.a)({queryKey:["expectedMove",t],queryFn:async()=>{if(!t)throw Error("Symbol is required");let e=await fetch("/api/expected-move/".concat(t));if(!e.ok)throw Error("Failed to fetch expected move data: ".concat(e.statusText));return e.json()},enabled:!!t,staleTime:3e4,refetchInterval:6e4})}({symbol:t}),{data:u,isLoading:p,error:j}=function(e){let{symbol:t}=e;return(0,r.a)({queryKey:["earnings",t],queryFn:async()=>{if(!t)throw Error("Symbol is required");let e=await fetch("/api/earnings/".concat(t));if(!e.ok)throw Error("Failed to fetch earnings data: ".concat(e.statusText));return e.json()},enabled:!!t,staleTime:3e5,refetchInterval:6e5})}({symbol:t}),v=i||m||j;return t?v?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),(0,a.jsxs)("p",{className:"text-red-700",children:["Error loading data for ",t,": ",v.message]})]})}):n||o||p?(0,a.jsx)("div",{className:"container mx-auto p-6 flex items-center justify-center min-h-[60vh]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(y.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Loading ",t," data..."]})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:t}),(null==s?void 0:s.chain.quote)&&(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[(0,a.jsxs)("span",{className:"text-2xl font-semibold",children:["$",s.chain.quote.last.toFixed(2)]}),(0,a.jsxs)("span",{className:"font-medium ".concat(s.chain.quote.change>=0?"text-green-600":"text-red-600"),children:[s.chain.quote.change>=0?"+":"",s.chain.quote.change.toFixed(2),"(",s.chain.quote.changePercent.toFixed(2),"%)"]})]})]}),(0,a.jsx)(N,{})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[c&&(0,a.jsx)(d,{data:c}),s&&(0,a.jsx)(g,{data:s})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(null==s?void 0:s.ivStats)&&(0,a.jsx)(x,{data:s.ivStats}),u&&(0,a.jsx)(h,{data:u,symbol:t})]})]})]}):(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsx)(N,{})})}}},function(e){e.O(0,[763,977,971,117,744],function(){return e(e.s=3718)}),_N_E=e.O()}]);